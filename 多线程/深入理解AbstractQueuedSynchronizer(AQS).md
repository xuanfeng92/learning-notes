# 深入理解AbstractQueuedSynchronizer(AQS)

1. AQS它内部实现主要是状态变量state和一个FIFO队列来完成，
2. 同步队列的头结点是当前获取到同步状态的结点。
3. 获取同步状态state失败的线程，会被构造成一个结点（或共享式或独占式）加入到同步队列尾部（采用自旋CAS来保证此操作的线程安全），随后线程会阻塞；
4. 释放时唤醒头结点的后继结点，使其加入对同步状态的争夺中。

> 1. 在使用AQS构建符合我们需求的同步组件时，只需重写**tryAcquire**，**tryAcquireShared**，**tryRelease**，**tryReleaseShared**几个方法，来决定同步状态的释放和获取即可，至于背后复杂的线程排队，线程阻塞/唤醒，如何保证线程安全，都由AQS为我们完成了
>
> 2. AQS定义好顶级逻辑的骨架，并提取出公用的线程入队列/出队列，阻塞/唤醒等一系列复杂逻辑的实现，将部分简单的可由使用者决定的操作逻辑延迟到子类中去实现。

